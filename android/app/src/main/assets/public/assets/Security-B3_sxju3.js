import{ax as te,c as se,r as o,j as t,ay as re,d as j,A as ne,m as O,u as oe,a as ce,b as ie,B as k,t as ae,I as C}from"./index-DiZJZs_I.js";import{C as R,a as D}from"./card-C8Plr-Mm.js";import{A as le}from"./arrow-left-LfTt41SV.js";import{K as de}from"./key-ClabLGG1.js";te();/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],fe=se("smartphone",ue);function pe(e,s,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return s==null?void 0:s(n)}}function B(e,s){if(typeof e=="function")return e(s);e!=null&&(e.current=s)}function W(...e){return s=>{let r=!1;const c=e.map(n=>{const a=B(n,s);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let n=0;n<c.length;n++){const a=c[n];typeof a=="function"?a():B(e[n],null)}}}}function F(...e){return o.useCallback(W(...e),e)}function me(e,s=[]){let r=[];function c(a,l){const i=o.createContext(l),d=r.length;r=[...r,l];const p=u=>{var w;const{scope:m,children:h,...x}=u,b=((w=m==null?void 0:m[e])==null?void 0:w[d])||i,v=o.useMemo(()=>x,Object.values(x));return t.jsx(b.Provider,{value:v,children:h})};p.displayName=a+"Provider";function f(u,m){var b;const h=((b=m==null?void 0:m[e])==null?void 0:b[d])||i,x=o.useContext(h);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[p,f]}const n=()=>{const a=r.map(l=>o.createContext(l));return function(i){const d=(i==null?void 0:i[e])||a;return o.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return n.scopeName=e,[c,he(n,...s)]}function he(...e){const s=e[0];if(e.length===1)return s;const r=()=>{const c=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const l=c.reduce((i,{useScope:d,scopeName:p})=>{const u=d(a)[`__scope${p}`];return{...i,...u}},{});return o.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}var V=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{},xe=re[" useInsertionEffect ".trim().toString()]||V;function ge({prop:e,defaultProp:s,onChange:r=()=>{},caller:c}){const[n,a,l]=be({defaultProp:s,onChange:r}),i=e!==void 0,d=i?e:n;{const f=o.useRef(e!==void 0);o.useEffect(()=>{const u=f.current;u!==i&&console.warn(`${c} is changing from ${u?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=i},[i,c])}const p=o.useCallback(f=>{var u;if(i){const m=ve(f)?f(e):f;m!==e&&((u=l.current)==null||u.call(l,m))}else a(f)},[i,e,a,l]);return[d,p]}function be({defaultProp:e,onChange:s}){const[r,c]=o.useState(e),n=o.useRef(r),a=o.useRef(s);return xe(()=>{a.current=s},[s]),o.useEffect(()=>{var l;n.current!==r&&((l=a.current)==null||l.call(a,r),n.current=r)},[r,n]),[r,c,a]}function ve(e){return typeof e=="function"}function we(e){const s=o.useRef({value:e,previous:e});return o.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}function ye(e){const[s,r]=o.useState(void 0);return V(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const c=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const a=n[0];let l,i;if("borderBoxSize"in a){const d=a.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,i=p.blockSize}else l=e.offsetWidth,i=e.offsetHeight;r({width:l,height:i})});return c.observe(e,{box:"border-box"}),()=>c.unobserve(e)}else r(void 0)},[e]),s}function je(e){const s=Ne(e),r=o.forwardRef((c,n)=>{const{children:a,...l}=c,i=o.Children.toArray(a),d=i.find(ke);if(d){const p=d.props.children,f=i.map(u=>u===d?o.Children.count(p)>1?o.Children.only(null):o.isValidElement(p)?p.props.children:null:u);return t.jsx(s,{...l,ref:n,children:o.isValidElement(p)?o.cloneElement(p,void 0,f):null})}return t.jsx(s,{...l,ref:n,children:a})});return r.displayName=`${e}.Slot`,r}function Ne(e){const s=o.forwardRef((r,c)=>{const{children:n,...a}=r;if(o.isValidElement(n)){const l=Pe(n),i=Ce(a,n.props);return n.type!==o.Fragment&&(i.ref=c?W(c,l):l),o.cloneElement(n,i)}return o.Children.count(n)>1?o.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var Se=Symbol("radix.slottable");function ke(e){return o.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Se}function Ce(e,s){const r={...s};for(const c in s){const n=e[c],a=s[c];/^on[A-Z]/.test(c)?n&&a?r[c]=(...i)=>{const d=a(...i);return n(...i),d}:n&&(r[c]=n):c==="style"?r[c]={...n,...a}:c==="className"&&(r[c]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}function Pe(e){var c,n;let s=(c=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:c.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=Ee.reduce((e,s)=>{const r=je(`Primitive.${s}`),c=o.forwardRef((n,a)=>{const{asChild:l,...i}=n,d=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(d,{...i,ref:a})});return c.displayName=`Primitive.${s}`,{...e,[s]:c}},{}),E="Switch",[Re]=me(E),[De,_e]=Re(E),U=o.forwardRef((e,s)=>{const{__scopeSwitch:r,name:c,checked:n,defaultChecked:a,required:l,disabled:i,value:d="on",onCheckedChange:p,form:f,...u}=e,[m,h]=o.useState(null),x=F(s,y=>h(y)),b=o.useRef(!1),v=m?f||!!m.closest("form"):!0,[w,N]=ge({prop:n,defaultProp:a??!1,onChange:p,caller:E});return t.jsxs(De,{scope:r,checked:w,disabled:i,children:[t.jsx(q.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":Z(w),"data-disabled":i?"":void 0,disabled:i,value:d,...u,ref:x,onClick:pe(e.onClick,y=>{N(P=>!P),v&&(b.current=y.isPropagationStopped(),b.current||y.stopPropagation())})}),v&&t.jsx(X,{control:m,bubbles:!b.current,name:c,value:d,checked:w,required:l,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});U.displayName=E;var H="SwitchThumb",K=o.forwardRef((e,s)=>{const{__scopeSwitch:r,...c}=e,n=_e(H,r);return t.jsx(q.span,{"data-state":Z(n.checked),"data-disabled":n.disabled?"":void 0,...c,ref:s})});K.displayName=H;var Ae="SwitchBubbleInput",X=o.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:c=!0,...n},a)=>{const l=o.useRef(null),i=F(l,a),d=we(r),p=ye(s);return o.useEffect(()=>{const f=l.current;if(!f)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==r&&h){const x=new Event("click",{bubbles:c});h.call(f,r),f.dispatchEvent(x)}},[d,r,c]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...n.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});X.displayName=Ae;function Z(e){return e?"checked":"unchecked"}var G=U,Be=K;const _=o.forwardRef(({className:e,...s},r)=>t.jsx(G,{className:j("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:r,children:t.jsx(Be,{className:j("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_.displayName=G.displayName;function L({open:e,onOpenChange:s,children:r}){return t.jsx(ne,{children:e&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s==null?void 0:s(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm"}),t.jsx("div",{className:"relative z-50 w-full max-w-lg p-4",children:r})]})})}function T({children:e,className:s}){return t.jsx(O.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.2},className:j("w-full overflow-hidden rounded-2xl bg-card p-6 shadow-xl border border-divider",s),children:e})}function I({children:e,className:s}){return t.jsx("div",{className:j("flex flex-col space-y-1.5 text-center sm:text-left mb-4",s),children:e})}function z({children:e,className:s}){return t.jsx("h3",{className:j("text-lg font-semibold leading-none tracking-tight",s),children:e})}function $({children:e,className:s}){return t.jsx("p",{className:j("text-sm text-text-secondary",s),children:e})}function M({children:e,className:s}){return t.jsx("div",{className:j("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 gap-2 mt-6",s),children:e})}function $e(){const{t:e}=oe(),s=ce(),{appLockEnabled:r,setAppLockEnabled:c,biometricsEnabled:n,setBiometricsEnabled:a,appPassword:l,setAppPassword:i,verifyPassword:d}=ie(),[p,f]=o.useState(!1),[u,m]=o.useState(""),[h,x]=o.useState(""),[b,v]=o.useState(""),[w,N]=o.useState(!1),[y,P]=o.useState(""),[A,S]=o.useState(""),J=g=>{g?l?c(!0):f(!0):c(!1)},Q=g=>{if(g&&!r){alert(e("settings.security.enableAppLockFirst")||"请先启用应用锁");return}a(g)},Y=()=>{if(v(""),!u){v(e("settings.security.passwordRequired")||"请输入密码");return}if(u.length<6){v(e("settings.security.passwordTooShort")||"密码至少需要6位");return}if(u!==h){v(e("settings.security.passwordMismatch")||"两次密码不一致");return}i(u),c(!0),m(""),x(""),f(!1)},ee=()=>{if(S(""),!d(y)){S(e("settings.security.wrongPassword")||"旧密码错误");return}if(!u){S(e("settings.security.passwordRequired")||"请输入新密码");return}if(u.length<6){S(e("settings.security.passwordTooShort")||"密码至少需要6位");return}if(u!==h){S(e("settings.security.passwordMismatch")||"两次密码不一致");return}i(u),P(""),m(""),x(""),N(!1)};return t.jsxs("div",{className:"min-h-screen bg-background-primary text-text-primary p-4 max-w-md mx-auto",children:[t.jsxs("div",{className:"flex items-center mb-6 pt-4",children:[t.jsx(k,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:t.jsx(le,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-xl font-bold ml-2",children:e("settings.security","Security")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider ml-1",children:e("settings.appLock","App Lock")}),t.jsx(R,{className:"bg-background-secondary border-divider",children:t.jsxs(D,{className:"p-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-accent/10 text-accent",children:t.jsx(ae,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e("settings.appLock","App Lock")}),t.jsx("p",{className:"text-xs text-text-secondary",children:e("settings.appLockDesc")})]})]}),t.jsx(_,{checked:r,onCheckedChange:J})]})})]}),l&&t.jsx("div",{className:"space-y-2",children:t.jsx(R,{className:"bg-background-secondary border-divider",children:t.jsx(D,{className:"p-4 flex items-center justify-between cursor-pointer",onClick:()=>N(!0),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-accent/10 text-accent",children:t.jsx(de,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e("settings.changePassword")||"修改密码"}),t.jsx("p",{className:"text-xs text-text-secondary",children:e("settings.changePasswordDesc")||"修改应用锁密码"})]})]})})})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider ml-1",children:e("settings.biometrics","Biometrics")}),t.jsx(R,{className:"bg-background-secondary border-divider",children:t.jsxs(D,{className:"p-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-accent/10 text-accent",children:t.jsx(fe,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e("settings.biometrics","Biometrics")}),t.jsx("p",{className:"text-xs text-text-secondary",children:e("settings.biometricsDesc")})]})]}),t.jsx(_,{checked:n,onCheckedChange:Q})]})})]})]}),t.jsx(L,{open:p,onOpenChange:f,children:t.jsxs(T,{className:"bg-background-secondary border-divider",children:[t.jsxs(I,{children:[t.jsx(z,{children:e("settings.setPassword")||"设置密码"}),t.jsx($,{children:e("settings.setPasswordDesc")||"请设置一个至少6位的密码来保护您的应用"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx(C,{type:"password",placeholder:e("settings.newPassword")||"新密码",value:u,onChange:g=>m(g.target.value),className:"bg-background-primary border-divider"})}),t.jsx("div",{children:t.jsx(C,{type:"password",placeholder:e("settings.confirmPassword")||"确认密码",value:h,onChange:g=>x(g.target.value),className:"bg-background-primary border-divider"})}),b&&t.jsx("p",{className:"text-sm text-red-500",children:b})]}),t.jsxs(M,{children:[t.jsx(k,{variant:"ghost",onClick:()=>f(!1),children:e("common.cancel")||"取消"}),t.jsx(k,{onClick:Y,children:e("common.confirm")||"确认"})]})]})}),t.jsx(L,{open:w,onOpenChange:N,children:t.jsxs(T,{className:"bg-background-secondary border-divider",children:[t.jsxs(I,{children:[t.jsx(z,{children:e("settings.changePassword")||"修改密码"}),t.jsx($,{children:e("settings.changePasswordDesc")||"请输入旧密码和新密码"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx(C,{type:"password",placeholder:e("settings.oldPassword")||"旧密码",value:y,onChange:g=>P(g.target.value),className:"bg-background-primary border-divider"})}),t.jsx("div",{children:t.jsx(C,{type:"password",placeholder:e("settings.newPassword")||"新密码",value:u,onChange:g=>m(g.target.value),className:"bg-background-primary border-divider"})}),t.jsx("div",{children:t.jsx(C,{type:"password",placeholder:e("settings.confirmPassword")||"确认新密码",value:h,onChange:g=>x(g.target.value),className:"bg-background-primary border-divider"})}),A&&t.jsx("p",{className:"text-sm text-red-500",children:A})]}),t.jsxs(M,{children:[t.jsx(k,{variant:"ghost",onClick:()=>N(!1),children:e("common.cancel")||"取消"}),t.jsx(k,{onClick:ee,children:e("common.confirm")||"确认"})]})]})})]})}export{$e as default};
