import{c as f,C as j,u as b,b as A,r as p,j as t,d as m,e as N}from"./index-DiZJZs_I.js";import{B as S}from"./badge-BzlJHLf2.js";import{F as k}from"./file-text-CxtXjn6R.js";import{A as R,a as L}from"./arrow-up-right-BQCutrJl.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],C=f("external-link",M);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_=f("refresh-cw",q),c={activities:{}},E=s=>new Promise(i=>setTimeout(i,s)),h={initUser:s=>(c.activities[s]||(c.activities[s]=[]),c.activities[s]),getActivities:async s=>{const i=await j.getAllActivity(s);h.initUser(s);const n=c.activities[s],l=[...i,...n];return Array.from(new Map(l.map(r=>[r.hash,r])).values()).sort((r,o)=>o.timestamp-r.timestamp)},addActivity:async(s,i)=>{await E(300),h.initUser(s);const n={...i,id:`tx_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return c.activities[s].unshift(n),n},clearActivities:s=>{c.activities[s]=[]}};function U(){const{t:s}=b(),{getCurrentWallet:i,activities:n,setActivities:l}=A(),a=i(),[r,o]=p.useState("All"),[d,v]=p.useState(!1),x=async()=>{if(a){v(!0);try{const e=await h.getActivities(a.address);Array.isArray(e)?l(e):console.error("Activity data is not an array:",e)}catch(e){console.error("Failed to load activities",e)}finally{v(!1)}}};p.useEffect(()=>{if(a!=null&&a.address){x();const e=setInterval(()=>{x()},3e4);return()=>clearInterval(e)}},[a==null?void 0:a.address]);const y=e=>{e&&window.open(`https://bscscan.com/tx/${e}`,"_blank")};if(!a)return t.jsx("div",{className:"p-8 text-center text-text-secondary",children:"Wallet not connected"});const u=n.filter(e=>r==="All"?!0:r==="Wallet"?e.type==="Send"||e.type==="Receive":r==="Swap"?e.type==="Swap":!0),w=e=>{switch(e){case"Send":return t.jsx(L,{className:"w-5 h-5 text-text-primary"});case"Receive":return t.jsx(R,{className:"w-5 h-5 text-accent"});case"Swap":return t.jsx(N,{className:"w-5 h-5 text-status-info"});default:return t.jsx(k,{className:"w-5 h-5 text-text-secondary"})}},g=e=>{switch(e){case"Send":return s("wallet.send");case"Receive":return s("wallet.receive");case"Swap":return s("wallet.swap");default:return e}};return t.jsxs("div",{className:"p-4 pt-8 pb-24 max-w-md mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:s("activity.title")}),t.jsx("button",{onClick:x,className:`p-2 rounded-full hover:bg-white/5 transition-all ${d?"animate-spin":""}`,children:t.jsx(_,{className:"w-5 h-5 text-text-secondary"})})]}),t.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:["All","Wallet","Swap"].map(e=>t.jsx("button",{onClick:()=>o(e),className:m("px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap",r===e?"bg-accent text-background-primary":"bg-card text-text-secondary hover:text-text-primary"),children:s(e==="All"?"activity.all":e==="Wallet"?"activity.wallet":"wallet.swap")},e))}),t.jsxs("div",{className:"space-y-3",children:[u.length===0&&!d&&t.jsx("div",{className:"text-center py-12 text-text-secondary",children:s("activity.noActivity")}),d&&u.length===0&&t.jsx("div",{className:"text-center py-12 text-text-secondary animate-pulse",children:s("common.loading","Loading...")}),u.map(e=>t.jsxs("div",{onClick:()=>y(e.hash),className:"flex items-center justify-between p-4 rounded-xl bg-card border border-divider/50 hover:border-accent/30 transition-colors group cursor-pointer",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:m("flex items-center justify-center w-10 h-10 rounded-full bg-background-secondary border border-divider",e.type==="Receive"&&"bg-accent/10 border-accent/20"),children:w(e.type)}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-text-primary",children:g(e.type)}),t.jsx("span",{className:"text-xs text-text-secondary",children:e.date})]})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsxs("span",{className:m("font-medium tabular-nums",e.type==="Receive"?"text-status-success":"text-text-primary"),children:[e.type==="Send"?"-":e.type==="Receive"?"+":"",e.amount||e.asset]}),t.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[t.jsx(S,{variant:e.status==="Success"?"success":e.status==="Pending"?"warning":"destructive",className:"text-[10px] h-4 px-1",children:e.status==="Success"?s("common.success"):e.status}),e.status!=="Pending"&&t.jsx(C,{className:"w-3 h-3 text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]},e.id))]})]})}export{U as default};
